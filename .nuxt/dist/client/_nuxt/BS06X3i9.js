import{_ as O}from"./B-r68-ay.js";import{_ as R,f as I,g as H,o as _,c as h,b as e,e as w,w as V,D,q as N,p as L,H as z,I as G,s as K,h as Q,i as c,t as M,z as W,j as X,A as Y,u as Z,F as C,d as A,k as ee,v as te,l as s,B as ae,x as S,m as le,ab as T,G as q,C as se,ac as oe}from"./OmrnE3d5.js";const ne={props:{item:{}},setup(){I.extend(H)},data(){return{dayjs:I}}},F=m=>(z("data-v-2a10e62e"),m=m(),G(),m),ie={class:"blog__list-item"},ce={class:"blog__item-10 white-bg transition-3 fix"},_e={class:"row"},re={class:"col-xl-2 col-lg-2 col-md-3"},de={class:"blog__thumb-10 w-img fix"},ue=["src"],me={class:"col-xl-10 col-lg-10 col-md-9"},pe={class:"blog__content-10"},ve={class:"blog__content-10-top"},he={class:"blog__title-10 mt-20",style:{"min-height":"60px"}},ge={class:"blog__content-10-bottom d-flex align-items-center flex-wrap"},ye={class:"blog__meta-author-10 d-flex align-items-center"},fe={class:"blog__meta-author-content-10"},we=F(()=>e("i",{class:"fa-regular fa-calendar"},null,-1)),be={class:"blog__meta-author-content-10 pl-20"},xe=F(()=>e("i",{class:"fa-regular fa-tag"},null,-1));function $e(m,n,l,b,x,B){const p=L;return _(),h("div",ie,[e("div",ce,[e("div",_e,[e("div",re,[w(p,{href:l.item.link+l.item.id},{default:V(()=>[e("div",de,[e("img",{src:l.item.file,alt:""},null,8,ue)])]),_:1},8,["href"])]),e("div",me,[w(p,{href:l.item.link+l.item.id},{default:V(()=>[e("div",pe,[e("div",ve,[e("h3",he,D(l.item.title),1)]),e("div",ge,[e("div",ye,[e("div",fe,[e("span",null,[we,N(" "+D(x.dayjs(l.item.created).locale("th").format("DD MMM BB")),1)])]),e("div",be,[e("span",null,[xe,N(" "+D(l.item.type_name),1)])])])])])]),_:1},8,["href"])])])])])}const Pe=R(ne,[["render",$e],["__scopeId","data-v-2a10e62e"]]),ke={class:"portfolio__area pt-40 pb-40"},De={class:"container"},Ie={class:"row"},Ve={class:"col-md-6 mb-20"},Be={class:""},Ne={key:0,class:"container"},Me={class:"row"},Ce={class:"col-lg-12"},Ae={class:"row"},Se={class:"col-xl-12"},Te={class:"blog__list-item-wrapper"},qe={class:"col-xxl-12"},Fe={class:"tp-pagination mt-30"},Ee={__name:"index",async setup(m){let n,l;const b=K(),x=Q(),B=le(),{apiBase:p}=B.public,g=c([]),U=c(12),i=c(1),v=c(1),$=c(0),o=c({news_type:null,created_year:null,created_month:null,is_publish:1,text_all:""}),j=[{options:"news_types",model:"news_type",label:"title",placeholder:"ประเภทข่าว"},{options:"years",model:"created_year",label:"title",placeholder:"ปี"},{options:"months",model:"created_month",label:"title",placeholder:"เดือน"}],y=c({news_types:[],perPage:[{title:"20",value:20},{title:"40",value:40},{title:"60",value:60}],years:[],months:[{title:"มกราคม",title_en:"January",value:"01"},{title:"กุมภาพันธ์",title_en:"February",value:"02"},{title:"มีนาคม",title_en:"March",value:"03"},{title:"เมษายน",title_en:"April",value:"04"},{title:"พฤษภาคม",title_en:"May",value:"05"},{title:"มิถุนายน",title_en:"June",value:"06"},{title:"กรกฎาคม",title_en:"July",value:"07"},{title:"สิงหาคม",title_en:"August",value:"08"},{title:"กันยายน",title_en:"September",value:"09"},{title:"ตุลาคม",title_en:"October",value:"10"},{title:"ฑฤศจิกายน",title_en:"November",value:"11"},{title:"ธันวาคม",title_en:"December",value:"12"}]});let P=I().year();for(let t=0;t<=9;t++)y.value.years.push({title:P-t+543,title_en:P-t,value:P-t});const E=t=>({link:"news/",id:t.id,title:t.title,file:t.news_file,created:t.created_news,type_name:t.news_type.name}),{data:J}=([n,l]=M(async()=>T("newsType",async()=>await $fetch(`${p}/news-type`,{params:{is_publish:1}}))),n=await n,l(),n);y.value.news_types=J.value.data.map(t=>({title:t.name,value:t.id})),b.query.page&&(i.value=b.query.page);const{data:k}=([n,l]=M(async()=>T("news",async()=>{var a,u,f;let t=o.value.text_all.length>3?o.value.text_all:"",r={...o.value,text_all:t,news_type_id:(a=o.value.news_type)==null?void 0:a.value,created_year:(u=o.value.created_year)==null?void 0:u.value,created_month:(f=o.value.created_month)==null?void 0:f.value,perPage:U.value,currentPage:i.value},d=await $fetch(`${p}/news`,{params:r});return g.value=d.data,v.value=d.totalPage,$.value=d.totalData,d})),n=await n,l(),n);return g.value=k.value.data,v.value=k.value.totalPage,$.value=k.value.totalData,W([i,o],()=>{x.replace({name:"news",query:{page:i.value}}),oe("news")},{deep:!0}),X(()=>{}),Y(()=>{i.value>v.value&&(i.value=v.value)}),Z({title:"ข่าวและประกาศ งานบริการวิชาการ มจพ."}),(t,r)=>{const d=O;return _(),h("section",ke,[e("div",De,[e("div",Ie,[(_(),h(C,null,A(j,(a,u)=>e("div",{key:u,class:"col-md-2 mb-20"},[w(d,null,{default:V(()=>[s(y)[a.options].length?(_(),q(s(se),{key:0,modelValue:s(o)[a.model],"onUpdate:modelValue":f=>s(o)[a.model]=f,label:a.label,placeholder:a.placeholder,options:s(y)[a.options],class:"v-select-no-border",clearable:!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","options"])):S("",!0)]),_:2},1024)])),64)),e("div",Ve,[e("div",Be,[ee(e("input",{class:"form-control","onUpdate:modelValue":r[0]||(r[0]=a=>s(o).text_all=a),type:"text",placeholder:"ค้นหาข่าว (พิมพ์ 3 ตัวอักษร)"},null,512),[[te,s(o).text_all]])])])])]),s(g).length!=0?(_(),h("div",Ne,[e("div",Me,[e("div",Ce,[e("div",Ae,[e("div",Se,[e("div",Te,[(_(!0),h(C,null,A(s(g),(a,u)=>(_(),q(Pe,{key:u,item:E(a)},null,8,["item"]))),128))])]),e("div",qe,[e("div",Fe,[w(ae,{totalPage:s(v),currentPage:s(i),totalItems:s($),"onUpdate:currentPage":r[1]||(r[1]=a=>i.value=a)},null,8,["totalPage","currentPage","totalItems"])])])])])])])):S("",!0)])}}};export{Ee as default};
