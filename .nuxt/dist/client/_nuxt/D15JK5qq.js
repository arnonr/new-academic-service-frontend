import{m as N,n as y,l as g}from"./DxzZJF1W.js";function k({swiper:e,extendParams:L,on:D,emit:E}){const _=N();L({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let T,v=g(),u;const s=[];function G(t){let r=0,i=0,a=0,o=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(r=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(r=i,i=0),a=r*10,o=i*10,"deltaY"in t&&(o=t.deltaY),"deltaX"in t&&(a=t.deltaX),t.shiftKey&&!a&&(a=o,o=0),(a||o)&&t.deltaMode&&(t.deltaMode===1?(a*=40,o*=40):(a*=800,o*=800)),a&&!r&&(r=a<1?-1:1),o&&!i&&(i=o<1?-1:1),{spinX:r,spinY:i,pixelX:a,pixelY:o}}function p(){e.enabled&&(e.mouseEntered=!0)}function A(){e.enabled&&(e.mouseEntered=!1)}function H(t){return e.params.mousewheel.thresholdDelta&&t.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&g()-v<e.params.mousewheel.thresholdTime?!1:t.delta>=6&&g()-v<60?!0:(t.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),E("scroll",t.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),E("scroll",t.raw)),v=new _.Date().getTime(),!1)}function O(t){const n=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&n.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&n.releaseOnEdges)return!0;return!1}function x(t){let n=t,X=!0;if(!e.enabled||t.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const h=e.params.mousewheel;e.params.cssMode&&n.preventDefault();let r=e.el;e.params.mousewheel.eventsTarget!=="container"&&(r=document.querySelector(e.params.mousewheel.eventsTarget));const i=r&&r.contains(n.target);if(!e.mouseEntered&&!i&&!h.releaseOnEdges)return!0;n.originalEvent&&(n=n.originalEvent);let a=0;const o=e.rtlTranslate?-1:1,d=G(n);if(h.forceToAxis)if(e.isHorizontal())if(Math.abs(d.pixelX)>Math.abs(d.pixelY))a=-d.pixelX*o;else return!0;else if(Math.abs(d.pixelY)>Math.abs(d.pixelX))a=-d.pixelY;else return!0;else a=Math.abs(d.pixelX)>Math.abs(d.pixelY)?-d.pixelX*o:-d.pixelY;if(a===0)return!0;h.invert&&(a=-a);let c=e.getTranslate()+a*h.sensitivity;if(c>=e.minTranslate()&&(c=e.minTranslate()),c<=e.maxTranslate()&&(c=e.maxTranslate()),X=e.params.loop?!0:!(c===e.minTranslate()||c===e.maxTranslate()),X&&e.params.nested&&n.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const l={time:g(),delta:Math.abs(a),direction:Math.sign(a),raw:t};s.length>=2&&s.shift();const f=s.length?s[s.length-1]:void 0;if(s.push(l),f?(l.direction!==f.direction||l.delta>f.delta||l.time>f.time+150)&&H(l):H(l),O(l))return!0}else{const l={time:g(),delta:Math.abs(a),direction:Math.sign(a)},f=u&&l.time<u.time+500&&l.delta<=u.delta&&l.direction===u.direction;if(!f){u=void 0;let m=e.getTranslate()+a*h.sensitivity;const C=e.isBeginning,B=e.isEnd;if(m>=e.minTranslate()&&(m=e.minTranslate()),m<=e.maxTranslate()&&(m=e.maxTranslate()),e.setTransition(0),e.setTranslate(m),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!C&&e.isBeginning||!B&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:l.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(T),T=void 0,s.length>=15&&s.shift();const I=s.length?s[s.length-1]:void 0,S=s[0];if(s.push(l),I&&(l.delta>I.delta||l.direction!==I.direction))s.splice(0);else if(s.length>=15&&l.time-S.time<500&&S.delta-l.delta>=1&&l.delta<=6){const Y=a>0?.8:.2;u=l,s.splice(0),T=y(()=>{e.slideToClosest(e.params.speed,!0,void 0,Y)},0)}T||(T=y(()=>{u=l,s.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(f||E("scroll",n),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),m===e.minTranslate()||m===e.maxTranslate())return!0}}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}function P(t){let n=e.el;e.params.mousewheel.eventsTarget!=="container"&&(n=document.querySelector(e.params.mousewheel.eventsTarget)),n[t]("mouseenter",p),n[t]("mouseleave",A),n[t]("wheel",x)}function b(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",x),!0):e.mousewheel.enabled?!1:(P("addEventListener"),e.mousewheel.enabled=!0,!0)}function M(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,x),!0):e.mousewheel.enabled?(P("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}D("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&M(),e.params.mousewheel.enabled&&b()}),D("destroy",()=>{e.params.cssMode&&b(),e.mousewheel.enabled&&M()}),Object.assign(e.mousewheel,{enable:b,disable:M})}export{k as M};
