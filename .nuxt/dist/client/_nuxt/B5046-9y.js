import{_ as R}from"./B-r68-ay.js";import{_ as j,o as n,c as u,b as e,G as $,w as y,x as m,D as B,e as b,q as C,E as z,p as F,H,I as L,s as T,h as U,i as d,t as V,z as G,j as M,A as O,u as J,l as s,F as K,d as Q,B as W,m as X,ab as N,C as Y,ac as Z}from"./OmrnE3d5.js";const ee={props:{item:{},masonry:{type:Boolean,default:!1}}},q=v=>(H("data-v-f089d84d"),v=v(),L(),v),te={class:"blog__item-10 white-bg transition-3 mb-30 fix"},ae={class:"blog__thumb-10 w-img fix w-img-news"},se=["src"],le={class:"blog__content-10"},oe={class:"blog__content-10-top"},ne={key:0,class:"blog__tag-10"},ie={href:"#"},ce={class:"blog__title-10"},_e={class:"blog__content-10-bottom d-flex align-items-center justify-content-between"},de={class:"blog__meta-author-10 d-flex align-items-center"},re={class:"blog__meta-author-content-10"},ue=q(()=>e("i",{class:"fa fa-arrow-right news-link-view"},null,-1)),me=q(()=>e("div",{class:"blog__meta-10 blog-meta-10-2"},null,-1));function ve(v,l,t,x,I,D){const r=F;return t.item?(n(),u("div",{key:0,class:z(`blog__grid-item ${t.masonry?"blog__masonary":""} ${t.item.file?"":"no-img"}`)},[e("div",te,[e("div",ae,[t.item.file?(n(),$(r,{key:0,to:t.item.link+t.item.id},{default:y(()=>[e("img",{src:t.item.file,alt:"blog img",class:"img-news"},null,8,se)]),_:1},8,["to"])):m("",!0)]),e("div",le,[e("div",oe,[t.item.file?m("",!0):(n(),u("div",ne,[e("a",ie,B(t.item.type_name),1)])),e("h3",ce,[b(r,{to:t.item.link+t.item.id},{default:y(()=>[C(B(t.item.title),1)]),_:1},8,["to"])])]),e("div",_e,[e("div",de,[e("div",re,[t.item.file?(n(),$(r,{key:0,to:t.item.link+t.item.id,class:"text-color-primary text-uppercase"},{default:y(()=>[C(" รายละเอียด "),ue]),_:1},8,["to"])):m("",!0)])]),me])])])],2)):m("",!0)}const ge=j(ee,[["render",ve],["__scopeId","data-v-f089d84d"]]),pe={class:"portfolio__area pt-40 pb-40"},he={class:"container"},fe={class:"row"},ye={class:"col-md-4 mb-20"},be={key:0,class:""},xe={key:0,class:"container"},we={class:"row"},ke={class:"col-lg-12"},Pe={class:"row"},$e={class:"col-xl-12"},Ie={class:"blog__list-item-wrapper"},De={class:"row gx-2 grid"},Be={class:"col-xxl-12"},Ce={class:"tp-pagination mt-30"},qe={__name:"index",async setup(v){let l,t;const x=T(),I=U(),D=X(),{apiBase:r}=D.public,p=d([]),S=d(12),i=d(1),g=d(1),w=d(0),_=d({department_id:null,service_category_id:null,title:"",created_year:null,created_month:null,is_publish:1,text_all:""}),k=d({news_types:[],perPage:[{title:"20",value:20},{title:"40",value:40},{title:"60",value:60}],service_categories:[],departments:[]}),A=a=>({link:"department/",id:a.id,title:a.name_th,file:a.department_file}),{data:E}=([l,t]=V(async()=>N("Department",async()=>await $fetch(`${r}/department`,{params:{is_publish:1}}))),l=await l,t(),l);k.value.departments=E.value.data.map(a=>({title:a.name_th,value:a.id})),x.query.page&&(i.value=x.query.page);const{data:P}=([l,t]=V(async()=>N("department",async()=>{var h,c,f;let a={..._.value,department_id:void 0,id:(h=_.value.department_id)==null?void 0:h.value,created_year:(c=_.value.created_year)==null?void 0:c.value,created_month:(f=_.value.created_month)==null?void 0:f.value,perPage:S.value,currentPage:i.value},o=await $fetch(`${r}/department`,{params:a});return p.value=o.data,g.value=o.totalPage,w.value=o.totalData,o})),l=await l,t(),l);return p.value=P.value.data,g.value=P.value.totalPage,w.value=P.value.totalData,G([i,_.value],()=>{I.replace({name:"department",query:{page:i.value}}),Z("department")},{deep:!0}),M(()=>{}),O(()=>{i.value>g.value&&(i.value=g.value)}),J({title:"หน่วยงาน บริการวิชาการ"}),(a,o)=>{const h=R;return n(),u("section",pe,[e("div",he,[e("div",fe,[e("div",ye,[s(k).departments.length!=0?(n(),u("div",be,[b(h,null,{default:y(()=>[b(s(Y),{label:"title",placeholder:"หน่วยงาน",options:s(k).departments,modelValue:s(_).department_id,"onUpdate:modelValue":o[0]||(o[0]=c=>s(_).department_id=c),class:"v-select-no-border",clearable:!0},null,8,["options","modelValue"])]),_:1})])):m("",!0)])])]),s(p).length!=0?(n(),u("div",xe,[e("div",we,[e("div",ke,[e("div",Pe,[e("div",$e,[e("div",Ie,[e("div",De,[(n(!0),u(K,null,Q(s(p),(c,f)=>(n(),$(ge,{key:f,class:"col-xxl-3 col-xl-3 col-lg-6 col-md-6",item:A(c)},null,8,["item"]))),128))])])]),e("div",Be,[e("div",Ce,[b(W,{totalPage:s(g),currentPage:s(i),totalItems:s(w),"onUpdate:currentPage":o[1]||(o[1]=c=>i.value=c)},null,8,["totalPage","currentPage","totalItems"])])])])])])])):m("",!0)])}}};export{qe as default};
