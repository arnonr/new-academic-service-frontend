import{s as D,h as $,i as u,f as q,t as f,z as C,j as I,A as j,u as F,c as y,l as o,b as s,F as J,d as M,e as O,B as R,x as V,ab as b,o as d,G as E,ac as G,m as T}from"./OmrnE3d5.js";import{N as z}from"./D4lBNCpG.js";const H={class:"portfolio__area pt-40 pb-40"},L={key:0,class:"container"},S={class:"row"},U={class:"col-lg-12"},K={class:"row"},Q={class:"col-xl-12"},W={class:"blog__list-item-wrapper"},X={class:"row gx-2 grid"},Y={class:"col-xxl-12"},Z={class:"tp-pagination mt-30"},ae={__name:"index-grid",props:{props_item:{type:Object,required:!0}},async setup(x){let t,c;const w=D(),P=$(),g=T(),_=u([]),N=u(12),a=u(1),i=u(1),p=u(0),l=u({news_type:null,created_year:null,created_month:null,is_publish:1}),B=x,h=u({news_types:[],perPage:[{title:"20",value:20},{title:"40",value:40},{title:"60",value:60}],years:[],months:[{title:"มกราคม",title_en:"January",value:"01"},{title:"กุมภาพันธ์",title_en:"February",value:"02"},{title:"มีนาคม",title_en:"March",value:"03"},{title:"เมษายน",title_en:"April",value:"04"},{title:"พฤษภาคม",title_en:"May",value:"05"},{title:"มิถุนายน",title_en:"June",value:"06"},{title:"กรกฎาคม",title_en:"July",value:"07"},{title:"สิงหาคม",title_en:"August",value:"08"},{title:"กันยายน",title_en:"September",value:"09"},{title:"ตุลาคม",title_en:"October",value:"10"},{title:"ฑฤศจิกายน",title_en:"November",value:"11"},{title:"ธันวาคม",title_en:"December",value:"12"}]});let v=q().year();for(let e=0;e<=9;e++)h.value.years.push({title:v-e+543,title_en:v-e,value:v-e});const{data:k}=([t,c]=f(async()=>b("newsType",async()=>await $fetch(`${g.public.apiBase}/news-type`,{params:{is_publish:1}}))),t=await t,c(),t);h.value.news_types=k.value.data.map(e=>({title:e.name,value:e.id})),w.query.page&&(a.value=w.query.page);const{data:m}=([t,c]=f(async()=>b("news",async()=>{let e={...l.value,news_type_id:l.value.news_type==null?void 0:l.value.news_type.value,created_year:l.value.created_year==null?void 0:l.value.created_year.value,created_month:l.value.created_month==null?void 0:l.value.created_month.value,department_id:B.props_item.department_id,perPage:N.value,currentPage:a.value},n=await $fetch(`${g.public.apiBase}/news`,{params:e});return _.value=n.data,i.value=n.totalPage,p.value=n.totalData,n})),t=await t,c(),t);return _.value=m.value.data,i.value=m.value.totalPage,p.value=m.value.totalData,C([a,l],()=>{P.replace({name:"news",query:{page:a.value}}),G("news")},{deep:!0}),I(()=>{}),j(()=>{a.value>i.value&&(a.value=i.value)}),F({title:"ข่าวและประกาศ"}),(e,n)=>(d(),y("section",H,[o(_).length!=0?(d(),y("div",L,[s("div",S,[s("div",U,[s("div",K,[s("div",Q,[s("div",W,[s("div",X,[(d(!0),y(J,null,M(o(_),(r,A)=>(d(),E(z,{key:A,class:"col-xxl-3 col-xl-3 col-lg-6 col-md-6",item:{link:"/news/",id:r.id,title:r.title,file:r.news_file,created:r.created_news,type_name:r.news_type.name}},null,8,["item"]))),128))])])]),s("div",Y,[s("div",Z,[O(R,{totalPage:o(i),currentPage:o(a),totalItems:o(p),"onUpdate:currentPage":n[0]||(n[0]=r=>a.value=r)},null,8,["totalPage","currentPage","totalItems"])])])])])])])):V("",!0)]))}};export{ae as default};
