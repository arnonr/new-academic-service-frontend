{"version":3,"file":"index-C9ySMj_J.js","sources":["../../../../components/list/DepartmentGridItem.vue","../../../../pages/department/index.vue"],"sourcesContent":["<template>\n    <div\n        v-if=\"item\"\n        :class=\"`blog__grid-item ${masonry ? 'blog__masonary' : ''} ${\n            !item.file ? 'no-img' : ''\n        }`\"\n    >\n        <div class=\"blog__item-10 white-bg transition-3 mb-30 fix\">\n            <div class=\"blog__thumb-10 w-img fix w-img-news\">\n                <nuxt-link v-if=\"item.file\" :to=\"item.link + item.id\">\n                    <img :src=\"item.file\" alt=\"blog img\" class=\"img-news\" />\n                </nuxt-link>\n            </div>\n            <div class=\"blog__content-10\">\n                <div class=\"blog__content-10-top\">\n                    <div v-if=\"!item.file\" class=\"blog__tag-10\">\n                        <a href=\"#\">{{ item.type_name }}</a>\n                    </div>\n\n                    <h3 class=\"blog__title-10\">\n                        <nuxt-link :to=\"item.link + item.id\">{{\n                            item.title\n                        }}</nuxt-link>\n                    </h3>\n                </div>\n                <div\n                    class=\"blog__content-10-bottom d-flex align-items-center justify-content-between\"\n                >\n                    <div class=\"blog__meta-author-10 d-flex align-items-center\">\n                        <div class=\"blog__meta-author-content-10\">\n                            <nuxt-link\n                                v-if=\"item.file\"\n                                :to=\"item.link + item.id\"\n                                class=\"text-color-primary text-uppercase\"\n                            >\n                                รายละเอียด\n                                <i class=\"fa fa-arrow-right news-link-view\"></i>\n                            </nuxt-link>\n                        </div>\n                    </div>\n                    <div class=\"blog__meta-10 blog-meta-10-2\">\n                        <!-- <span>\n                            <i\n                                class=\"fa-regular fa-tag\"\n                                style=\"margin-right: 0px; color: #bdbdc6\"\n                            ></i>\n                            {{ item.type_name }}\n                        </span> -->\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        item: {},\n        masonry: {\n            type: Boolean,\n            default: false,\n        },\n    },\n};\n</script>\n\n<style scoped>\n.blog__item-10 {\n    border-radius: 0.5em;\n    border: solid 1px #eee;\n}\n\n.text-color-primary {\n    color: #f60;\n}\n\n.blog__grid-item .blog__content-10-top {\n    padding: 1em;\n    padding-top: 2em;\n    min-height: 120px;\n}\n\n.blog__content-10-bottom {\n    border-top: 0px;\n    padding: 1em;\n}\n\n.blog__grid-item .blog__title-10 {\n    font-size: 18px;\n    font-weight: 500;\n}\n\n.blog__grid-item .blog__meta-10 span {\n    color: var(--tp-text-4);\n}\n\n@media only screen and (min-width: 1025px) {\n    .w-img-news {\n        max-height: 190px;\n        min-height: 190px;\n    }\n    .img-news {\n        min-height: 190px !important;\n    }\n}\n</style>\n","<template>\n    <section class=\"portfolio__area pt-40 pb-40\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-4 mb-20\">\n                    <div class=\"\" v-if=\"selectOptions.departments.length != 0\">\n                        <client-only>\n                            <v-select\n                                label=\"title\"\n                                placeholder=\"หน่วยงาน\"\n                                :options=\"selectOptions.departments\"\n                                v-model=\"search.department_id\"\n                                class=\"v-select-no-border\"\n                                :clearable=\"true\"\n                            ></v-select>\n                        </client-only>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"container\" v-if=\"items.length != 0\">\n            <div class=\"row\">\n                <div class=\"col-lg-12\">\n                    <div class=\"row\">\n                        <div class=\"col-xl-12\">\n                            <div class=\"blog__list-item-wrapper\">\n                                <div class=\"row gx-2 grid\">\n                                    <ListItem\n                                        v-for=\"(it, i) in items\"\n                                        :key=\"i\"\n                                        class=\"col-xxl-3 col-xl-3 col-lg-6 col-md-6\"\n                                        :item=\"mapItemToProps(it)\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-xxl-12\">\n                            <div class=\"tp-pagination mt-30\">\n                                <blog-pagination\n                                    :totalPage=\"totalPage\"\n                                    :currentPage=\"currentPage\"\n                                    :totalItems=\"totalItems\"\n                                    @update:currentPage=\"currentPage = $event\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</template>\n\n<script setup>\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/th\";\nimport vSelect from \"vue-select\";\nimport \"vue-select/dist/vue-select.css\";\nimport { useRuntimeConfig } from \"#app\";\n// Import\nimport ListItem from \"~/components/list/DepartmentGridItem.vue\";\nimport BlogPagination from \"~/components/common/pagination/BlogPagination.vue\";\n// Variable\nconst route = useRoute();\nconst router = useRouter();\nconst config = useRuntimeConfig();\nconst { apiBase } = config.public;\nconst items = ref([]);\nconst perPage = ref(12);\nconst currentPage = ref(1);\nconst totalPage = ref(1);\nconst totalItems = ref(0);\nconst search = ref({\n    department_id: null,\n    service_category_id: null,\n    title: \"\",\n    created_year: null,\n    created_month: null,\n    is_publish: 1,\n    text_all: \"\",\n});\n\nconst selectOptions = ref({\n    news_types: [],\n    perPage: [\n        { title: \"20\", value: 20 },\n        { title: \"40\", value: 40 },\n        { title: \"60\", value: 60 },\n    ],\n    service_categories: [],\n    departments: [],\n});\n\nconst mapItemToProps = (it) => ({\n    link: \"department/\",\n    id: it.id,\n    title: it.name_th,\n    file: it.department_file,\n});\n\n// Function Fetch\nconst { data: resDepartment } = await useAsyncData(\"Department\", async () => {\n    let data = await $fetch(`${apiBase}/department`, {\n        params: {\n            is_publish: 1,\n        },\n    });\n\n    return data;\n});\n\nselectOptions.value.departments = resDepartment.value.data.map((e) => {\n    return { title: e.name_th, value: e.id };\n});\n\nif (route.query.page) {\n    currentPage.value = route.query.page;\n}\n\nconst { data: res } = await useAsyncData(\"department\", async () => {\n    let params = {\n        ...search.value,\n        department_id: undefined,\n        id: search.value.department_id?.value,\n        created_year: search.value.created_year?.value,\n        created_month: search.value.created_month?.value,\n        perPage: perPage.value,\n        currentPage: currentPage.value,\n    };\n\n    let data = await $fetch(`${apiBase}/department`, {\n        params: params,\n    });\n\n    items.value = data.data;\n    totalPage.value = data.totalPage;\n    totalItems.value = data.totalData;\n    return data;\n});\n\nitems.value = res.value.data;\ntotalPage.value = res.value.totalPage;\ntotalItems.value = res.value.totalData;\n\nwatch(\n    [currentPage, search.value],\n    () => {\n        router.replace({\n            name: \"department\",\n            query: { page: currentPage.value },\n        });\n        refreshNuxtData(\"department\");\n    },\n    { deep: true }\n);\n\nonMounted(() => {});\n\nwatchEffect(() => {\n    if (currentPage.value > totalPage.value)\n        currentPage.value = totalPage.value;\n});\n\nuseHead({\n    title: \"หน่วยงาน บริการวิชาการ\",\n});\n</script>\n\n<style scoped></style>\n"],"names":["_sfc_main","_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_withCtx","_push","_parent","_ssrRenderAttr","_createVNode","_ssrInterpolate","_createTextVNode","_toDisplayString","_withAsyncContext"],"mappings":"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"}