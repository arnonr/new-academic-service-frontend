{"version":3,"file":"index-BKvppt9g.js","sources":["../../../../components/list/ListItem.vue","../../../../pages/news/index.vue"],"sourcesContent":["<template>\n    <div class=\"blog__list-item\">\n        <div class=\"blog__item-10 white-bg transition-3 fix\">\n            <div class=\"row\">\n                <div class=\"col-xl-2 col-lg-2 col-md-3\">\n                    <nuxt-link :href=\"item.link + item.id\">\n                        <div class=\"blog__thumb-10 w-img fix\">\n                            <img :src=\"item.file\" alt=\"\" /></div\n                    ></nuxt-link>\n                </div>\n                <div class=\"col-xl-10 col-lg-10 col-md-9\">\n                    <nuxt-link :href=\"item.link + item.id\">\n                        <div class=\"blog__content-10\">\n                            <div class=\"blog__content-10-top\">\n                                <h3\n                                    class=\"blog__title-10 mt-20\"\n                                    style=\"min-height: 60px\"\n                                >\n                                    {{ item.title }}\n                                </h3>\n\n                                <!-- <p style=\"text-align: justify; text-indent: 2em\" v-html=\"item.detail.replace(/(<([^>]+)>)/gi, '').slice(0, 400)+'...'\">\n                  </p> -->\n                            </div>\n\n                            <div\n                                class=\"blog__content-10-bottom d-flex align-items-center flex-wrap\"\n                            >\n                                <div\n                                    class=\"blog__meta-author-10 d-flex align-items-center\"\n                                >\n                                    <div class=\"blog__meta-author-content-10\">\n                                        <span>\n                                            <i\n                                                class=\"fa-regular fa-calendar\"\n                                            ></i>\n                                            {{\n                                                dayjs(item.created).locale('th').format(\n                                                    \"DD MMM BB\"\n                                                )\n                                            }}\n                                        </span>\n                                    </div>\n\n                                    <div\n                                        class=\"blog__meta-author-content-10 pl-20\"\n                                    >\n                                        <span>\n                                            <i class=\"fa-regular fa-tag\"></i>\n                                            {{ item.type_name }}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </nuxt-link>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/th\";\nimport buddhistEra from \"dayjs/plugin/buddhistEra\";\n\nexport default {\n    props: {\n        item: {},\n    },\n    setup() {\n        dayjs.extend(buddhistEra);\n    },\n    data() {\n        return {\n            dayjs,\n        };\n    },\n};\n</script>\n\n<style scoped>\n.blog__list-item .blog__thumb-10 {\n    width: 100%;\n    height: 100%;\n}\n\n.blog__list-item {\n    padding-right: 25px;\n}\n\n.blog__title-10 {\n    color: #74737a;\n}\n\n.blog__content-10 {\n    min-height: 100px;\n}\n\n@media only screen and (max-width: 600px) {\n    .blog__content-10 {\n        margin-top: 20px;\n    }\n}\n\n.blog__list-item .blog__content-10 {\n    padding-top: 0px;\n}\n\n.blog__list-item .blog__title-10 {\n    font-size: 18px;\n    letter-spacing: 0.3px;\n}\n\n.blog__list-item .blog__meta-author-content-10 span {\n    color: var(--tp-text-2);\n}\n</style>\n","<template>\n    <section class=\"portfolio__area pt-40 pb-40\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div\n                    v-for=\"(select, index) in selectOptionsFields\"\n                    :key=\"index\"\n                    class=\"col-md-2 mb-20\"\n                >\n                    <client-only>\n                        <v-select\n                            v-if=\"selectOptions[select.options].length\"\n                            v-model=\"search[select.model]\"\n                            :label=\"select.label\"\n                            :placeholder=\"select.placeholder\"\n                            :options=\"selectOptions[select.options]\"\n                            class=\"v-select-no-border\"\n                            :clearable=\"true\"\n                        />\n                    </client-only>\n                </div>\n\n                <div class=\"col-md-6 mb-20\">\n                    <div class=\"\">\n                        <input\n                            class=\"form-control\"\n                            v-model=\"search.text_all\"\n                            type=\"text\"\n                            placeholder=\"ค้นหาข่าว (พิมพ์ 3 ตัวอักษร)\"\n                        />\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"container\" v-if=\"items.length != 0\">\n            <div class=\"row\">\n                <div class=\"col-lg-12\">\n                    <div class=\"row\">\n                        <div class=\"col-xl-12\">\n                            <div class=\"blog__list-item-wrapper\">\n                                <NewsListItem\n                                    v-for=\"(it, i) in items\"\n                                    :key=\"i\"\n                                    :item=\"mapItemToProps(it)\"\n                                />\n                            </div>\n                        </div>\n                        <div class=\"col-xxl-12\">\n                            <div class=\"tp-pagination mt-30\">\n                                <blog-pagination\n                                    :totalPage=\"totalPage\"\n                                    :currentPage=\"currentPage\"\n                                    :totalItems=\"totalItems\"\n                                    @update:currentPage=\"currentPage = $event\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</template>\n\n<script setup>\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/th\";\nimport vSelect from \"vue-select\";\nimport \"vue-select/dist/vue-select.css\";\nimport { useRuntimeConfig } from \"#app\";\n// Import\nimport NewsListItem from \"~/components/list/ListItem.vue\";\nimport BlogPagination from \"~/components/common/pagination/BlogPagination.vue\";\n// Variable\nconst route = useRoute();\nconst router = useRouter();\nconst config = useRuntimeConfig();\nconst { apiBase } = config.public;\nconst items = ref([]);\nconst perPage = ref(12);\nconst currentPage = ref(1);\nconst totalPage = ref(1);\nconst totalItems = ref(0);\nconst search = ref({\n    news_type: null,\n    created_year: null,\n    created_month: null,\n    is_publish: 1,\n    text_all: \"\",\n});\n\nconst selectOptionsFields = [\n    {\n        options: \"news_types\",\n        model: \"news_type\",\n        label: \"title\",\n        placeholder: \"ประเภทข่าว\",\n    },\n    {\n        options: \"years\",\n        model: \"created_year\",\n        label: \"title\",\n        placeholder: \"ปี\",\n    },\n    {\n        options: \"months\",\n        model: \"created_month\",\n        label: \"title\",\n        placeholder: \"เดือน\",\n    },\n];\n\nconst selectOptions = ref({\n    news_types: [],\n    perPage: [\n        { title: \"20\", value: 20 },\n        { title: \"40\", value: 40 },\n        { title: \"60\", value: 60 },\n    ],\n    years: [],\n    months: [\n        { title: \"มกราคม\", title_en: \"January\", value: \"01\" },\n        { title: \"กุมภาพันธ์\", title_en: \"February\", value: \"02\" },\n        { title: \"มีนาคม\", title_en: \"March\", value: \"03\" },\n        { title: \"เมษายน\", title_en: \"April\", value: \"04\" },\n        { title: \"พฤษภาคม\", title_en: \"May\", value: \"05\" },\n        { title: \"มิถุนายน\", title_en: \"June\", value: \"06\" },\n        { title: \"กรกฎาคม\", title_en: \"July\", value: \"07\" },\n        { title: \"สิงหาคม\", title_en: \"August\", value: \"08\" },\n        { title: \"กันยายน\", title_en: \"September\", value: \"09\" },\n        { title: \"ตุลาคม\", title_en: \"October\", value: \"10\" },\n        { title: \"ฑฤศจิกายน\", title_en: \"November\", value: \"11\" },\n        { title: \"ธันวาคม\", title_en: \"December\", value: \"12\" },\n    ],\n});\n\nlet year = dayjs().year();\n\nfor (let i = 0; i <= 9; i++) {\n    selectOptions.value.years.push({\n        title: year - i + 543,\n        title_en: year - i,\n        value: year - i,\n    });\n}\n\nconst mapItemToProps = (it) => ({\n    link: \"news/\",\n    id: it.id,\n    title: it.title,\n    file: it.news_file,\n    created: it.created_news,\n    type_name: it.news_type.name,\n});\n\n// Function Fetch\nconst { data: resNewsType } = await useAsyncData(\"newsType\", async () => {\n    let data = await $fetch(`${apiBase}/news-type`, {\n        params: {\n            is_publish: 1,\n        },\n    });\n\n    return data;\n});\n\nselectOptions.value.news_types = resNewsType.value.data.map((e) => {\n    return { title: e.name, value: e.id };\n});\n\nif (route.query.page) {\n    currentPage.value = route.query.page;\n}\n\nconst { data: res } = await useAsyncData(\"news\", async () => {\n    let text_all =\n        search.value.text_all.length > 3 ? search.value.text_all : \"\";\n\n    let params = {\n        ...search.value,\n        text_all: text_all,\n        news_type_id: search.value.news_type?.value,\n        created_year: search.value.created_year?.value,\n        created_month: search.value.created_month?.value,\n        perPage: perPage.value,\n        currentPage: currentPage.value,\n    };\n\n    let data = await $fetch(`${apiBase}/news`, {\n        params: params,\n    });\n    items.value = data.data;\n    totalPage.value = data.totalPage;\n    totalItems.value = data.totalData;\n    return data;\n});\n\nitems.value = res.value.data;\ntotalPage.value = res.value.totalPage;\ntotalItems.value = res.value.totalData;\n\nwatch(\n    [currentPage, search],\n    () => {\n        router.replace({\n            name: \"news\",\n            query: { page: currentPage.value },\n        });\n        refreshNuxtData(\"news\");\n    },\n    { deep: true }\n);\n\nonMounted(() => {});\n\nwatchEffect(() => {\n    if (currentPage.value > totalPage.value)\n        currentPage.value = totalPage.value;\n});\n\nuseHead({\n    title: \"ข่าวและประกาศ งานบริการวิชาการ มจพ.\",\n});\n\n// definePageMeta({\n//   middleware: \"auth\",\n// });\n</script>\n\n<style scoped></style>\n"],"names":["_sfc_main","_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_withCtx","_push","_parent","_ssrRenderAttr","_createVNode","_ssrRenderStyle","_ssrInterpolate","_toDisplayString","_createTextVNode","_withAsyncContext"],"mappings":"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"}