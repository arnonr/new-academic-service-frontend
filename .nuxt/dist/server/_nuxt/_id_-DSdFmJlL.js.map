{"version":3,"file":"_id_-DSdFmJlL.js","sources":["../../../../pages/admin/news/[id].vue"],"sourcesContent":["<template>\n    <section class=\"breadcrumb__area include-bg pb-40 pt-30 grey-bg-4\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-xxl-12\" v-if=\"item != null\">\n                    <div class=\"breadcrumb__content p-relative z-index-1\">\n                        <div class=\"breadcrumb__list\">\n                            <span> จัดการข้อมูล </span>\n                            <span class=\"dvdr\"\n                                ><i class=\"fa-solid fa-circle-small\"></i\n                            ></span>\n                            <span>\n                                <NuxtLink href=\"/admin/news\">\n                                    รายการข่าว\n                                </NuxtLink></span\n                            >\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <!--  -->\n    <section class=\"postbox__area pt-40 pb-120\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-xxl-12\">\n                    <div class=\"postbox__wrapper\" v-if=\"item != null\">\n                        <!-- Content -->\n                        <div class=\"postbox__main\">\n                            <div class=\"row\">\n                                <div class=\"col-lg-12\">\n                                    <div class=\"postbox__main-wrapper\">\n                                        <div\n                                            class=\"postbox__details-content-wrapper\"\n                                        >\n                                            <div class=\"text-end\">\n                                                <NuxtLink\n                                                    :to=\"{\n                                                        name: 'admin-news-edit-id',\n                                                        params: { id: item.id },\n                                                    }\"\n                                                    class=\"btn btn-warning\"\n                                                    >แก้ไขข้อมูล</NuxtLink\n                                                >\n\n                                                <button\n                                                    class=\"btn btn-danger ml-5\"\n                                                    @click=\"\n                                                        onConfirmDelete(item.id)\n                                                    \"\n                                                >\n                                                    ลบ\n                                                </button>\n                                            </div>\n                                        </div>\n\n                                        <div\n                                            class=\"postbox__details-content-wrapper mt-20\"\n                                        >\n                                            <div class=\"row\">\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >หัวข้อข่าว :\n                                                    </span>\n                                                    <span>{{\n                                                        item.title_th\n                                                    }}</span>\n                                                    <hr />\n                                                </div>\n\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >หน่วยงาน :\n                                                    </span>\n                                                    <span>{{\n                                                        item.department.name_th\n                                                    }}</span>\n                                                    <hr />\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >ประเภทข่าว :\n                                                    </span>\n                                                    <span>{{\n                                                        item.news_type.name\n                                                    }}</span>\n                                                    <hr />\n                                                </div>\n\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >ประเภทการบริการวิชาการ\n                                                        :\n                                                    </span>\n                                                    <span\n                                                        v-for=\"(\n                                                            sc, idx\n                                                        ) in item.service_categories\"\n                                                        :key=\"idx\"\n                                                        >{{\n                                                            sc.service_category\n                                                                .name_th + \", \"\n                                                        }}</span\n                                                    >\n                                                    <hr />\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >รูปภาพปกข่าว :\n                                                    </span>\n                                                    <div>\n                                                        <img\n                                                            :src=\"\n                                                                item.news_file\n                                                            \"\n                                                            class=\"mt-20\"\n                                                            style=\"\n                                                                max-height: 400px;\n                                                            \"\n                                                        />\n                                                    </div>\n\n                                                    <hr />\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >เนื้อหาข่าว :\n                                                    </span>\n                                                    <div\n                                                        v-html=\"item.detail_th\"\n                                                    ></div>\n                                                    <hr />\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >วันที่ลงข้อมูล :\n                                                    </span>\n                                                    <span>{{\n                                                        dayjs(item.created_news)\n                                                            .locale(\"th\")\n                                                            .format(\n                                                                \"DD MMM BBBB\"\n                                                            )\n                                                    }}</span>\n                                                    <hr />\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >สถานะ :\n                                                    </span>\n\n                                                    <span\n                                                        v-if=\"\n                                                            item.is_publish !=\n                                                            null\n                                                        \"\n                                                        :class=\"\n                                                            'badge rounded-pill bg-' +\n                                                            basic_data.data()\n                                                                .publishes[\n                                                                item.is_publish\n                                                            ].color\n                                                        \"\n                                                        >{{\n                                                            basic_data.data()\n                                                                .publishes[\n                                                                item.is_publish\n                                                            ].name_th\n                                                        }}</span\n                                                    >\n\n                                                    <hr />\n                                                </div>\n\n                                                <div class=\"col-12\">\n                                                    <span class=\"fw-bold\"\n                                                        >แกลลอรี่ :\n                                                    </span>\n                                                    <div class=\"mx-auto\">\n                                                        <ClientOnly>\n                                                            <Swiper\n                                                                :slidesPerView=\"\n                                                                    1\n                                                                \"\n                                                                :spaceBetween=\"\n                                                                    10\n                                                                \"\n                                                                :loop=\"true\"\n                                                                :thumbs=\"{\n                                                                    swiper: thumbsSwiper,\n                                                                }\"\n                                                                :navigation=\"\n                                                                    true\n                                                                \"\n                                                                :modules=\"\n                                                                    modules\n                                                                \"\n                                                                :speed=\"5000\"\n                                                                :autoplay=\"{\n                                                                    delay: 5000,\n                                                                    disableOnInteraction: true,\n                                                                }\"\n                                                                class=\"mySwiper2 mb-10\"\n                                                                v-if=\"\n                                                                    gallery.length !=\n                                                                    0\n                                                                \"\n                                                            >\n                                                                <SwiperSlide\n                                                                    v-for=\"ng in gallery\"\n                                                                    :key=\"ng.id\"\n                                                                >\n                                                                    <img\n                                                                        :src=\"\n                                                                            ng.news_gallery_file\n                                                                        \"\n                                                                        style=\"\n                                                                            max-width: 800px;\n                                                                            margin-left: auto;\n                                                                            margin-right: auto;\n                                                                            display: block;\n                                                                        \"\n                                                                    />\n                                                                </SwiperSlide>\n                                                            </Swiper>\n\n                                                            <Swiper\n                                                                @swiper=\"\n                                                                    setThumbsSwiper\n                                                                \"\n                                                                :spaceBetween=\"\n                                                                    10\n                                                                \"\n                                                                :slidesPerView=\"\n                                                                    4\n                                                                \"\n                                                                :freeMode=\"true\"\n                                                                :watchSlidesProgress=\"\n                                                                    true\n                                                                \"\n                                                                :modules=\"\n                                                                    modules\n                                                                \"\n                                                                class=\"mySwiper\"\n                                                            >\n                                                                <SwiperSlide\n                                                                    v-for=\"ng in gallery\"\n                                                                    :key=\"ng.id\"\n                                                                >\n                                                                    <img\n                                                                        :src=\"\n                                                                            ng.news_gallery_file\n                                                                        \"\n                                                                        style=\"\n                                                                            max-width: 200px;\n                                                                            cursor: pointer;\n                                                                        \"\n                                                                    />\n                                                                </SwiperSlide>\n                                                            </Swiper>\n                                                        </ClientOnly>\n                                                    </div>\n\n                                                    <hr />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</template>\n\n<script setup>\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\nimport {\n    Autoplay,\n    FreeMode,\n    Navigation,\n    Pagination,\n    Scrollbar,\n    Thumbs,\n} from \"swiper\";\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/th\";\nimport Swal from \"sweetalert2\";\nimport Toastify from \"toastify-js\";\nimport \"toastify-js/src/toastify.css\";\nimport basic_data from \"~~/mixins/basicData\";\nimport { useRuntimeConfig } from \"#app\";\n\nimport buddhistEra from \"dayjs/plugin/buddhistEra\";\ndayjs.extend(buddhistEra);\n\nconst configR = useRuntimeConfig();\nconst { apiBase } = configR.public;\nconst route = useRoute();\nconst router = useRouter();\nconst modules = [Autoplay, FreeMode, Navigation, Pagination, Scrollbar, Thumbs];\n\nconst gallery = ref([]);\nconst thumbsSwiper = ref(null);\n\nconst item = ref(null);\n\nconst setThumbsSwiper = (swiper) => {\n    thumbsSwiper.value = swiper;\n};\n\n// Fetch\nconst fetchGallery = async () => {\n    let data = await $fetch(`${apiBase}/news-gallery`, {\n        params: {\n            is_publish: 1,\n            news_id: route.params.id,\n        },\n    }).catch((error) => error.data);\n\n    gallery.value = data.data;\n};\n\nconst fetchItem = async () => {\n    let data = await $fetch(`${apiBase}/news/${route.params.id}`, {\n        params: {},\n    }).catch((error) => error.data);\n\n    item.value = data.data;\n};\n\nonMounted(() => {\n    fetchGallery();\n    fetchItem();\n});\n\n// Event\nconst onConfirmDelete = async (id) => {\n    Swal.fire({\n        title: \"ยืนยันการลบข้อมูล\",\n        text: \"หลังจากลบข้อมูลแล้วไม่สามารถกลับมาแก้ไขได้\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, Cancle it!\",\n    }).then((result) => {\n        if (result.isConfirmed) {\n            onDelete(id);\n        }\n    });\n};\n\nconst onDelete = async (id) => {\n    await $fetch(`${apiBase}/news/${id}`, {\n        method: \"delete\",\n    })\n        .then((res) => {\n            if (res.msg == \"success\") {\n                useToast(\"ลบรายการเสร็จสิ้น\", \"success\");\n                router.push({ path: \"/admin/news\" });\n            } else {\n                throw new Error(\"ERROR\");\n            }\n        })\n        .catch((error) => error.data);\n};\n\nuseHead({\n    title: \"ข่าวประชาสัมพันธ์\",\n});\n</script>\n\n<style scoped>\n.breadcrumb__title {\n    font-size: 50px;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0SA,UAAM,OAAO,WAAW;AAExB,UAAM,UAAU,iBAAgB;AACZ,YAAQ;AACd,aAAW;AACV,cAAY;AAGX,QAAI,EAAE;AACD,QAAI,IAAI;AAE7B,UAAM,OAAO,IAAI,IAAI;AA+DrB,YAAQ;AAAA,MACJ,OAAO;AAAA,IACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}